# Note that several config options are provided by JavaScript
# in index.html. Those options are merged into these options.

backend:
  name: github
  base_url: https://netlify-cms-oauth-sable.vercel.app/

media_folder: "img/uploads"

collections:
  - name: datasets
    label: Datasets
    label_singular: Dataset
    folder: _datasets
    create: true
    summary: "{{title}} ({{organization}})"
    preview_path: "datasets/{{slug}}"
    view_groups:
      - label: Organization
        field: organization
    fields:
      - label: Title
        name: title
        widget: string

      - label: Organization
        name: organization
        widget: relation
        collection: organizations
        value_field: "title"
        search_fields:
          - title

      - label: Description
        name: notes
        widget: text

      - label: Keyword
        name: keyword
        widget: relation
        collection: keywords
        multiple: true
        value_field: "name"
        search_fields:
          - name

      - label: Type
        name: type
        required: false
        widget: relation
        collection: settings
        file: types
        multiple: true
        value_field: "items.*.url"
        search_fields: ["items.*.name"]
        display_fields: ["items.*.name"]

      - label: Periodicity
        name: periodicity
        required: true
        widget: relation
        collection: settings
        file: periods
        pagination: 50
        multiple: false
        value_field: "items2.*.url"
        search_fields: ["items2.*.name"]
        display_fields: ["items2.*.name"]

      - label: Category
        name: category
        required: false
        widget: relation
        collection: categories
        multiple: true
        value_field: "name"
        search_fields:
          - name

      - label: Category DCAT
        name: category_dcat
        required: true
        widget: relation
        collection: settings
        file: categories_dcat
        multiple: false
        value_field: "items2.*.url"
        search_fields: ["items2.*.name"]
        display_fields: ["items2.*.name"]

      - label: Resources
        name: resources
        widget: list
        fields:
          - label: Resource Name
            name: name
            widget: string
            required: false
          - label: URL
            name: url
            widget: string
          - label: Format
            name: format
            required: true
            widget: relation
            collection: settings
            file: formats
            multiple: false
            value_field: "items.*.url"
            search_fields: ["items.*.name"]
            display_fields: ["items.*.name"]
          - label: License Authors Work Type    
            name: license_AWT
            required: true
            widget: relation
            collection: settings
            file: licenses
            multiple: false
            value_field: "items.*.url"
            search_fields: ["items.*.name"]
            display_fields: ["items.*.name"]
          - label: License Original Database Type    
            name: license_ODT
            required: true
            widget: relation
            collection: settings
            file: licenses
            multiple: false
            value_field: "items.*.url"
            search_fields: ["items.*.name"]
            display_fields: ["items.*.name"]
          - label: License Database Protected By Special Rights Type   
            name: license_DPBSRT
            required: true
            widget: relation
            collection: settings
            file: licenses
            multiple: false
            value_field: "items.*.url"
            search_fields: ["items.*.name"]
            display_fields: ["items.*.name"]
          - label: Autor diela
            name: author
            widget: string
            required: false

      - label: License
        name: license
        required: false
        hint: Not sure what license to use? See [licenses.opendefinition.org](https://licenses.opendefinition.org/)
        widget: relation
        collection: settings
        file: licenses
        value_field: "items.*.url"
        search_fields: ["items.*.name"]
        display_fields: ["items.*.name"]

      - label: Maintainer
        name: maintainer
        required: false
        widget: string

      - label: Maintainer Email
        name: maintainer_email
        required: false
        widget: string

  - name: organizations
    label: Organizations
    label_singular: Organization
    folder: _organizations
    create: true
    preview_path: "organizations/{{slug}}"
    fields:
      - label: Title
        name: title
        widget: string

      - label: Description
        name: description
        required: false
        widget: text

      - label: Logo
        name: logo
        required: false
        widget: image
        allow_multiple: false
        media_folder: /img/organizations

  - name: categories
    label: Categories
    label_singular: Category
    folder: _dataset_categories
    description: Dataset categories
    create: true
    preview_path: "categories/{{slug}}"
    identifier_field: name
    fields:
      - label: Name
        name: name
        widget: string

      - label: Logo
        name: logo
        required: false
        widget: image
        allow_multiple: false
        media_folder: /img/categories

      - label: Logo Credit
        name: logo_credit
        required: false
        widget: string

      - label: Featured on Homepage
        name: featured
        widget: boolean
        required: false

  - name: keywords
    label: Keywords
    label_singular: Keyword
    folder: _dataset_keywords
    description: Dataset keywords
    create: true
    preview_path: "keywords/{{slug}}"
    identifier_field: name
    fields:
      - label: Name
        name: name
        widget: string


  - name: settings
    label: Settings
    delete: false
    editor:
      preview: false
    files:
      - name: config
        label: Site settings
        file: _config.yml
        fields:
          - label: Site Title
            name: title
            widget: string

          - label: Site Greeting
            name: greeting
            description: Displayed on the homepage
            widget: string

          - label: Site Description
            name: description
            widget: text

          - label: Base URL
            name: baseurl
            widget: string

      - name: licenses
        label: Licenses
        hide: true
        description: Dataset licenses
        file: _data/licenses.yml
        fields:
          - label: Licenses
            name: items
            label_singular: License
            widget: list
            fields:
              - label: Name
                name: name
                widget: string
                
              - label: URL
                name: url
                required: false
                widget: string

      - name: periods
        label: Periods
        hide: true
        description: Dataset periods
        file: _data/periods.yml
        fields:
          - label: Periods
            name: items2
            label_singular: Period
            widget: list
            fields:
              - label: Name
                name: name
                widget: string

              - label: URL
                name: url
                required: false
                widget: string

      - name: categories_dcat
        label: Categories DCAT
        hide: true
        description: Dataset category DCAT
        file: _data/categories_dcat.yml
        fields:
          - label: Categories
            name: items2
            label_singular: Category
            widget: list
            fields:
              - label: Name
                name: name
                widget: string

              - label: URL
                name: url
                required: false
                widget: string

      - name: types
        label: Types
        hide: true
        description: Type of dataset
        file: _data/types.yml
        fields:
          - label: Types
            name: items
            label_singular: Type
            widget: list
            fields:
              - label: Name
                name: name
                widget: string

              - label: URL
                name: url
                required: false
                widget: string

      - name: formats
        label: Formats
        hide: true
        description: Format of distribution
        file: _data/formats.yml
        fields:
          - label: Types
            name: items
            label_singular: Type
            widget: list
            fields:
              - label: Name
                name: name
                widget: string

              - label: URL
                name: url
                required: false
                widget: string

